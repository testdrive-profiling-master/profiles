<!DOCTYPE html>
<html>
	<head>
		<script src="dist/svg-pan-zoom.js"></script>
		<script src="dist/jquery.min.js"></script>
	</head>

	<body>
	<div id="container" style="width: 100%; height: 100%; border:1px solid black;"></div>

	<script>
		// Don't use window.onLoad like this in production, because it can only listen to one function.
		$(function() {
			var lastEventListener = null;

			function createNewEmbed(src){
				var embed = document.createElement('embed');
				//embed.setAttribute('style', 'width: 100%; height: 100%;');
				embed.setAttribute('type', 'image/svg+xml');
				embed.setAttribute('src', src);

				document.getElementById('container').appendChild(embed)

				lastEventListener = function(){
					svgPanZoom(embed, {
						zoomEnabled: true,
						controlIconsEnabled: true,
						fit: true,
						center: true,
						minZoom: 0.1
					});
				}
				embed.addEventListener('load', lastEventListener)

				return embed
			}

			var lastEmbed = createNewEmbed('output/test_wrapper_hierarchy.svg');

			function removeEmbed(){
				svgPanZoom(lastEmbed).destroy()								// Destroy svgpanzoom
				lastEmbed.removeEventListener('load', lastEventListener)	// Remove event listener
				lastEventListener = null									// Null last event listener
				document.getElementById('container').removeChild(lastEmbed)	// Remove embed element
				lastEmbed = null											// Null reference to embed
			}


			/*$('#swap').on('click', function(){
				// Remove last added svg
				removeEmbed()
				lastEmbed = createNewEmbed('output/test_wrapper_hierarchy.svg')
			})*/
		});
	</script>

	</body>

</html>
